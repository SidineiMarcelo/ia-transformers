<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <title>IA Transformers</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="app">
      <header class="app-header">
        <h1>IA Transformers</h1>
        <p class="app-subtitle">
          Crie, salve e ative diferentes personalidades de IA.
        </p>
      </header>

      <main class="layout">
        <!-- LADO ESQUERDO -->
        <aside class="col col-left">
          <h2>Transformers salvos</h2>
          <div id="listaTransformers" class="lista-transformers"></div>
          <button id="limparListaBtn" class="btn secundario full">
            Limpar lista
          </button>
        </aside>

        <!-- CENTRO -->
        <section class="col col-center">
          <div class="holo-card">
            <div id="holo-head" class="holo-head">
              <div class="holo-face"></div>
            </div>
            <div class="holo-info">
              <h2 id="holo-nome">Transformer ativo</h2>
              <p id="holo-status-text" class="holo-status">Ocioso</p>
            </div>
          </div>

          <div class="status-bar" id="status">
            Pronto (aguardando sua mensagem)
          </div>

          <div id="mensagens" class="mensagens"></div>

          <div class="entrada-container">
            <textarea
              id="entradaTexto"
              placeholder="Digite sua mensagem aqui..."
            ></textarea>
            
            <div class="botoes-chat">
              <button id="enviarBtn" class="btn primario">Enviar</button>
              <button id="iniciarConversaBtn" class="btn secundario">
                ğŸ¤ Iniciar Conversa
              </button>
              <button id="pararConversaBtn" class="btn perigo" disabled>
                ğŸ›‘ Parar
              </button>
              <button id="lerBtn" class="btn secundario">
                ğŸ”Š Ouvir resposta
              </button>
            </div>
          </div>
        </section>

        <!-- DIREITA -->
        <aside class="col col-right">
          <h2>ConfiguraÃ§Ãµes de Acesso</h2>

          <!-- ÃREA DE CONTROLE DE ACESSO E CUSTO -->
          <div style="background: rgba(0,242,255,0.05); padding: 12px; border-radius: 8px; border: 1px solid rgba(0,242,255,0.2); margin-bottom: 12px;">
            
            <!-- 1. LICENÃ‡A (SEU CONTROLE) -->
            <label class="campo-label" style="color: #ffeb3b;">ğŸ”‘ Chave de LicenÃ§a (ObrigatÃ³rio)</label>
            <input
              id="licenseKeyInput"
              type="password"
              class="campo-input"
              placeholder="Digite sua licenÃ§a..."
              style="border-color: #ffeb3b; margin-bottom: 8px;"
            />

            <!-- 2. OPENAI (CUSTO DO CLIENTE) -->
            <label class="campo-label" style="color: #00ff88;">ğŸ¤– Chave OpenAI (Cliente)</label>
            <input
              id="userApiKey"
              type="password"
              class="campo-input"
              placeholder="sk-..."
              style="border-color: #00ff88;"
            />
            <small style="color: #a9b4ff; font-size: 0.65rem; display: block; margin-top: 4px;">
              A chave OpenAI Ã© usada para processar as mensagens. A LicenÃ§a libera seu acesso ao app.
            </small>
          </div>

          <h2>ConfiguraÃ§Ã£o do Agente</h2>
          <label class="campo-label" for="transformerNome">Nome</label>
          <input
            id="transformerNome"
            type="text"
            class="campo-input"
            placeholder="Ex.: Supa base teste"
          />

          <label class="campo-label" for="vozSelect">Voz da IA</label>
          <select id="vozSelect" class="campo-input">
            <option value="alloy">Alloy (neutra, clara)</option>
            <option value="onyx">Onyx (masculina, firme)</option>
            <option value="nova">Nova (suave)</option>
          </select>

          <label class="campo-label" for="perfil">Perfil do agente</label>
          <textarea
            id="perfil"
            class="campo-textarea"
            placeholder="Descreva como este Transformer deve se comportar..."
          ></textarea>

          <div class="botoes-perfil">
            <button id="aplicarPerfilBtn" class="btn secundario full">
              Aplicar perfil ao Transformer ativo
            </button>
          </div>

          <!-- MÃ“DULO RAG -->
          <div class="rag-container">
            <span class="rag-label">ğŸ“‚ Base de Conhecimento (RAG)</span>
            
            <div class="custom-file-upload">
              <label for="arquivoInput" class="btn secundario small">ğŸ“ Escolher</label>
              <div id="fileNameDisplay" class="file-name-box">Nenhum arquivo selecionado</div>
              <input type="file" id="arquivoInput" accept=".pdf,.docx" style="display: none;" />
            </div>
            
            <button id="btnUpload" class="btn primario full" style="margin-top: 8px;">
              Carregar Documento
            </button>
            <div id="uploadStatus" class="upload-status"></div>

            <label class="rag-toggle">
              <input type="checkbox" id="checkRag" class="rag-checkbox" />
              <span class="rag-checkbox-label">Consultar Base de Conhecimento</span>
            </label>
          </div>

          <div class="botoes-transformer">
            <button id="salvarTransformerBtn" class="btn primario full">
              ğŸ’¾ Salvar Transformer
            </button>
            <button id="limparTransformerBtn" class="btn perigo full">
              Limpar perfil
            </button>
          </div>
        </aside>
      </main>
    </div>

    <script src="script.js"></script> 
  </body>
</html>